# 设计原则与思想：面向对象

04 | 理论一：当谈论面向对象的时候，我们到底在谈论什么？
=====

第一个模块会讲一些设计原则、设计思想，比如，面向对象设计思想、经典设计原则以及重构相关的知识，为之后学习设计模式做铺垫。

> 提到面向对象，很多人都不陌生，可以说出面向对象的四大特性：封装、抽象、继承、多态。实际上，面向对象这个概念包含的内容还不止这些。

## 什么是面向对象编程和面向对象编程语言？

> 面向对象编程的英文缩写是 OOP，全称是 `Object Oriented Programming`。对应地，面向对象编程语言的英文缩写是 OOPL，全称是 `Object Oriented Programming Language`。

面向对象编程中有两个非常重要、非常基础的概念，那就是**类（class）和对象（object）**。

面向对象编程的“发家之路”：

> 这两个概念最早出现在 1960 年，在 Simula 这种编程语言中第一次使用。
> 
> 而面向对象编程这个概念第一次被使用是在 Smalltalk 这种编程语言中。Smalltalk 被认为是第一个真正意义上的面向对象编程语言。

> 1980 年左右，C++ 的出现，带动了面向对象编程的流行，也使得面向对象编程被越来越多的人认可。直到今天，如果不按照严格的定义来说，大部分编程语言都是面向对象编程语言，比如 Java、C++、Go(有 OOP 的思想，有争议)、Python、C#、Ruby、JavaScript、Objective-C、Scala、PHP、Perl 等等。

#### 那究竟什么是面向对象编程？什么语言才算是面向对象编程语言呢？

我觉得可以用下面两句话来概括：

* 面向对象编程是一种**编程范式或编程风格**。它以`类或对象`作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基石 。
* 面向对象编程语言**支持类或对象的语法机制，并有现成的语法机制**，是能够方便地实现四大特性（封装、抽象、继承、多态）的编程语言。

> 一般来讲， 面向对象编程都是通过使用面向对象编程语言来进行的，但是，不用面向对象编程语言，我们照样可以进行面向对象编程。
> 
> 反过来讲，即便我们使用面向对象编程语言，写出来的代码也不一定是面向对象编程风格的，也有可能是面向过程编程风格的。

[一点想法]

> @yx
> 
> 这就好像屠夫一般用杀猪刀(面向对象编程语言)杀猪(面向对象编程)，但是用杀猪刀(面向对象编程语言)也可能用来杀鸡（比如面向过程编程）；还有可能用瑞士军刀(比如面向过程编程语言)杀猪(面向对象编程),是不是杀猪(面向对象编程)关键的不是哪种工具，而是杀猪风格（编程范式或编程风格）

从定义可以看出，理解面向对象编程及面向对象编程语言两个概念，最关键的一点就是理解面向对象编程的四大特性（封装、抽象、继承、多态）。

> 不过，关于面向对象编程的特性，也有另外一种说法，那就是只包含三大特性：封装、继承、多态，不包含抽象。为什么会有这种分歧呢？抽象为什么可以排除在面向对象编程特性之外呢？关于这个问题，在下一节课详细讲解这四大特性的时候，我还会再拿出来说一下。不过，我们没必要纠结到底是四大特性还是三大特性，关键还是理解每种特性讲的是什么内容、存在的意义以及能解决什么问题。

[一点想法]

> @yx
> 
> 可见，计算机领域很多的概念并没有完全的定论，不过我们没有必要去纠结哪一种叫法是“正统”，真正需要关注的应该是 这个概念是什么、为什么要有这种概念、这个概念怎么样解决问题等等，这才是关键(key)，其他的叫法就当是“百花齐放，百家争鸣”好了。 

## 如何判定某编程语言是否是面向对象编程语言？

> “如果不按照严格的定义来说，大部分编程语言都是面向对象编程语言”。
> 
> 为什么要加上“如果不按照严格的定义”这个前提呢？那是因为，如果按照刚刚我们给出的严格的面向对象编程语言的定义，前面提到的有些编程语言，并不是严格意义上的面向对象编程语言，比如 JavaScript，它不支持封装和继承特性，按照严格的定义，它不算是面向对象编程语言，但在某种意义上，它又可以算得上是一种面向对象编程语言。我为什么这么说呢？

#### 到底该如何判断一个编程语言是否是面向对象编程语言呢？

> 实际上，对于什么是面向对象编程、什么是面向对象编程语言，并没有一个官方的、统一的定义。而且，从 1960 年，也就是 60 年前面向对象编程诞生开始，这两个概念就在不停地演化，所以，也无法给出一个明确的定义，也没有必要给出一个明确定义。

实际上，面向对象编程从字面上，按照最简单、最原始的方式来理解，就是**将对象或类作为代码组织的基本单元**，来进行编程的一种编程范式或者编程风格，并不一定需要封装、抽象、继承、多态这四大特性的支持。但是，在进行面向对象编程的过程中，人们不停地总结发现，有了这四大特性，我们就能**更容易地实现各种面向对象的代码设计思路**。

> 比如，我们在面向对象编程的过程中，经常会遇到 is-a 这种类关系（比如狗是一种动物），而继承这个特性就能很好地支持这种 is-a 的代码设计思路，并且解决代码复用的问题，所以，继承就成了面向对象编程的四大特性之一。
> 
> 但是随着编程语言的不断迭代、演化，继承这种特性容易造成层次不清、代码混乱，所以，很多编程语言在设计的时候就开始摒弃继承特性，比如 Go 语言。但是，我们并不能因为它摒弃了继承特性，就一刀切地认为它不是面向对象编程语言了。

实际上，我个人觉得，只要**某种编程语言支持类或对象的语法概念，并且以此作为组织代码的基本单元**，那就可以被粗略地认为它就是面向对象编程语言了。至于是否有现成的语法机制，完全地支持了面向对象编程的四大特性、是否对四大特性有所取舍和优化，可以不作为判定的标准。基于此，我们才有了前面的说法**，按照严格的定义，很多语言都不能算得上面向对象编程语言，但按照不严格的定义来讲，现在流行的大部分编程语言都是面向对象编程语言**。

> @yx
> 
> 实际上去下个死定义，争论是不是 OOPL，意义不大。

## 什么是面向对象分析和面向对象设计？

实际上，跟面向对象编程（OOP）经常放到一块儿来讲的还有另外两个概念，那就是**面向对象分析（OOA）和面向对象设计（OOD）**。

- 面向对象分析英文缩写是 OOA，全称是 Object Oriented Analysis
- 面向对象设计的英文缩写是 OOD，全称是 Object Oriented Design。

OOA、OOD、OOP 三个连在一起就是面向对象分析、设计、编程（实现），正好是面向对象软件开发要经历的三个阶段。

什么是面向对象分析和设计。这两个概念相对来说要简单一些。面向对象分析与设计中的“分析”和“设计”这两个词，我们完全可以从字面上去理解，不需要过度解读，简单类比软件开发中的需求分析、系统设计即可。

> 不过，你可能会说，那为啥前面还加了个修饰词“面向对象”呢？有什么特殊的意义吗？

之所以在前面加“面向对象”这几个字，是因为我们是围绕着对象或类来做需求分析和设计的。分析和设计两个阶段**最终的产出是类的设计**，包括程序被拆解为哪些类，每个类有哪些属性方法，类与类之间如何交互等等。它们比其他的分析和设计更加具体、更加落地、更加贴近编码，更能够顺利地过渡到面向对象编程环节。这也是面向对象分析和设计，与其他分析和设计最大的不同点。

> 那面向对象分析、设计、编程到底都负责做哪些工作呢？

- 简单点讲，面向对象分析就是要搞清楚做什么
- 面向对象设计就是要搞清楚怎么做
- 面向对象编程就是将分析和设计的的结果翻译成代码的过程

## 什么是 UML？我们是否需要 UML？

讲到面向对象分析、设计、编程，我们就不得不提到另外一个概念，那就是 **UML（Unified Model Language），统一建模语言**。很多讲解面向对象或设计模式的书籍，常用它来画图表达面向对象或设计模式的设计思路。

实际上，UML 是一种非常复杂的东西。它不仅仅包含我们常提到类图，还有用例图、顺序图、活动图、状态图、组件图等。在我看来，即便仅仅使用类图，学习成本也是很高的。就单说类之间的关系，UML 就定义了很多种，比如泛化、实现、关联、聚合、组合、依赖等。

> 要想完全掌握，并且熟练运用这些类之间的关系，来画 UML 类图，肯定要花很多的学习精力。而且，UML 作为一种沟通工具，即便你能完全按照 UML 规范来画类图，可对于不熟悉的人来说，看懂的成本也还是很高的。

所以，从我的开发经验来说，UML 在互联网公司的项目开发中，用处可能并不大。为了文档化软件设计或者方便讨论软件设计，**大部分情况下，我们随手画个不那么规范的草图，能够达意，方便沟通就够了**，而完全按照 UML 规范来将草图标准化，所付出的代价是不值得的。

> 所以特别说明一下，专栏中的很多类图我并没有完全遵守 UML 的规范标准。为了兼顾图的表达能力和你的学习成本，我对 UML 类图规范做了简化，并配上了详细的文字解释，力图让你一眼就能看懂，而非适得其反，让图加重你的学习成本。毕竟，我们的专栏并不是一个讲方法论的教程，专栏中的所有类图，本质是让你更清晰地理解设计。

## 重点回顾
总结一下:

#### 1. 什么是面向对象编程？
面向对象编程是一种编程范式或编程风格。它以类或对象作为组织代码的基本单元，并将封装、抽象、继承、多态四个特性，作为代码设计和实现的基石 。

#### 2. 什么是面向对象编程语言？
面向对象编程语言是支持类或对象的语法机制，并有现成的语法机制，能方便地实现面向对象编程四大特性（封装、抽象、继承、多态）的编程语言。

#### 3. 如何判定一个编程语言是否是面向对象编程语言？
如果按照严格的的定义，需要有现成的语法支持类、对象、四大特性才能叫作面向对象编程语言。如果放宽要求的话，只要某种编程语言支持类、对象语法机制，那基本上就可以说这种编程语言是面向对象编程语言了，不一定非得要求具有所有的四大特性。

#### 4. 面向对象编程和面向对象编程语言之间有何关系？
面向对象编程一般使用面向对象编程语言来进行，但是，不用面向对象编程语言，我们照样可以进行面向对象编程。反过来讲，即便我们使用面向对象编程语言，写出来的代码也不一定是面向对象编程风格的，也有可能是面向过程编程风格的。

#### 5. 什么是面向对象分析和面向对象设计？

简单点讲，面向对象分析就是要搞清楚做什么，面向对象设计就是要搞清楚怎么做。两个阶段最终的产出是类的设计，包括程序被拆解为哪些类，每个类有哪些属性方法、类与类之间如何交互等等。

## 课堂讨论
1.在文章中，我讲到 UML 的学习成本很高，沟通成本也不低，不推荐在面向对象分析、设计的过程中使用，对此你有何看法？

2.有关面向对象的概念和知识点，除了我们今天讲到的，你还能想到其他哪些吗？